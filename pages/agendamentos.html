<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendamentos - CliniVida</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body class="paciente-page">

    <header class="cabeçalho">
        <a href="../index.html">
            <img src="../assets/logo.png" alt="Logo CliniVida" class="logo">
        </a>
        <nav>
            <ul class="menu">
                <li><a href="../paciente.html">HOME</a></li>
                <li><a href="agendamentos.html" class="active">AGENDAMENTOS</a></li> <li><a href="historico.html">HISTÓRICO CLÍNICO</a></li>
                <li><a href="plano.html">PLANOS E COBERTURAS</a></li>
                <li><a href="perfil.html">MEU PERFIL</a></li>
                <li><a href="ajuda.html">SUPORTE</a></li>
                <li><a href="../index.html" id="sair">SAIR</a></li>
            </ul>
        </nav>
    </header>

    <main class="main-content-wrapper agenda-page-wrapper">
        <div class="agenda-content">
            <div id="etapa-data" class="agenda-step active">
                <h2 class="agenda-titulo">ESCOLHA A DATA DA CONSULTA</h2>
                <div class="calendar-nav">
                    <span id="prevMonth" class="arrow-nav">&lt;</span>
                    <span id="currentMonthYear">Janeiro 2025</span>
                    <span id="nextMonth" class="arrow-nav">&gt;</span>
                </div>
                <table class="calendar">
                    <thead>
                        <tr>
                            <th>Dom</th>
                            <th>Seg</th>
                            <th>Ter</th>
                            <th>Qua</th>
                            <th>Qui</th>
                            <th>Sex</th>
                            <th>Sab</th>
                        </tr>
                    </thead>
                    <tbody id="calendar-body">
                        <tr>
                            <td class="past-day"></td>
                            <td class="past-day"></td>
                            <td class="past-day">1</td>
                            <td class="past-day">2</td>
                            <td class="past-day">3</td>
                            <td class="available-day selected-day">4</td>
                        </tr>
                        <tr>
                            <td class="unavailable-day">5</td>
                            <td class="available-day">6</td>
                            <td class="available-day">7</td>
                            <td class="available-day">8</td>
                            <td class="available-day">9</td>
                            <td class="available-day">10</td>
                            <td class="available-day">11</td>
                        </tr>
                        <tr>
                            <td class="unavailable-day">12</td>
                            <td class="available-day">13</td>
                            <td class="available-day">14</td>
                            <td class="available-day">15</td>
                            <td class="available-day">16</td>
                            <td class="available-day">17</td>
                            <td class="available-day">18</td>
                        </tr>
                        <tr>
                            <td class="unavailable-day">19</td>
                            <td class="available-day">20</td>
                            <td class="available-day">21</td>
                            <td class="available-day">22</td>
                            <td class="available-day">23</td>
                            <td class="available-day">24</td>
                            <td class="available-day">25</td>
                        </tr>
                        <tr>
                            <td class="unavailable-day">26</td>
                            <td class="available-day">27</td>
                            <td class="available-day">28</td>
                            <td class="available-day">29</td>
                            <td class="available-day">30</td>
                            <td class="available-day">31</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <button class="btn btn-proximo" onclick="showNextStep('etapa-horario')">PRÓXIMO</button>
            </div>

            <div id="etapa-horario" class="agenda-step" style="display: none;">
                <h2 class="agenda-titulo">ESCOLHA O HORÁRIO</h2>
                <p class="data-selecionada">Sexta-feira, 24 de janeiro</p>
                <div class="horarios-grid">
                    <button class="horario-btn active">09:00</button>
                    <button class="horario-btn unavailable">10:00</button>
                    <button class="horario-btn">11:00</button>
                    <button class="horario-btn">13:00</button>
                    <button class="horario-btn">14:00</button>
                    <button class="horario-btn unavailable">15:00</button>
                    <button class="horario-btn">16:00</button>
                    <button class="horario-btn">17:00</button>
                    <button class="horario-btn unavailable">18:00</button>
                </div>
                <button class="btn btn-proximo" onclick="showNextStep('etapa-informacoes')">PRÓXIMO</button>
            </div>

            <div id="etapa-informacoes" class="agenda-step" style="display: none;">
                <h2 class="agenda-titulo">Informações adicionais</h2>
                <p class="agenda-descricao">Preencha suas informações para personalizar sua consulta.</p>
                <div class="form-grid-agenda">
                    <div class="form-group-agenda">
                        <label for="tipo-sanguineo">Tipo sanguíneo</label>
                        <select id="tipo-sanguineo">
                            <option value="">Selecione</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                    </div>
                    <div class="form-group-agenda">
                        <label for="comorbidades">Comorbidades</label>
                        <select id="comorbidades">
                            <option value="">Selecione</option>
                            <option value="diabetes">Diabetes</option>
                            <option value="hipertensao">Hipertensão</option>
                            <option value="asma">Asma</option>
                        </select>
                    </div>
                    <div class="form-group-agenda full-width-textarea">
                        <label for="observacoes">OBSERVAÇÕES</label>
                        <textarea id="observacoes" placeholder="Adicione aqui informações importantes que não foram incluídos nos campos anteriores, como detalhes sobre sua saúde, metas específicas ou preferências adicionais"></textarea>
                    </div>
                    <div class="form-group-agenda">
                        <label for="alergias">Alergias</label>
                        <select id="alergias">
                            <option value="">Selecione</option>
                            <option value="poeira">Poeira</option>
                            <option value="polen">Pólen</option>
                            <option value="amendoim">Amendoim</option>
                        </select>
                    </div>
                    <div class="form-group-agenda">
                        <label for="preferencias-alimentares">Preferências alimentares</label>
                        <select id="preferencias-alimentares">
                            <option value="">Selecione</option>
                            <option value="vegetariano">Vegetariano</option>
                            <option value="vegano">Vegano</option>
                        </select>
                    </div>
                    <div class="form-group-agenda">
                        <label for="intolerancias-alimentares">Intolerâncias alimentares</label>
                        <select id="intolerancias-alimentares">
                            <option value="">Selecione</option>
                            <option value="lactose">Lactose</option>
                            <option value="gluten">Glúten</option>
                        </select>
                    </div>
                    <div class="form-group-agenda">
                        <label for="aversos-alimentares">Aversões alimentares</label>
                        <select id="aversos-alimentares">
                            <option value="">Selecione</option>
                            <option value="brocolis">Brócolis</option>
                            <option value="quiabo">Quiabo</option>
                        </select>
                    </div>
                </div>
                <div class="agenda-actions">
                    <button class="btn btn-voltar" onclick="showNextStep('etapa-horario')">VOLTAR</button>
                    <button class="btn btn-confirmar-agendamento">CONFIRMAR AGENDAMENTO</button>
                </div>
            </div>

            </div>
    </main>

    <footer class="rodape">
        <div class="rodape-conteudo">
            <div class="rodape-logo">
                <img src="../assets/logo.png" alt="Logo CliniVida">
            </div>
            <nav class="rodape-mapa">
                <h5>Mapa do Site</h5>
                <ul>
                    <li><a href="../paciente.html">Home</a></li>
                    <li><a href="agendamentos.html">Agendamentos</a></li>
                    <li><a href="historico.html">Histórico Clínico</a></li>
                    <li><a href="plano.html">Planos e Coberturas</a></li>
                    <li><a href="perfil.html">Meu Perfil</a></li>
                    <li><a href="ajuda.html">Suporte</a></li>
                </ul>
            </nav>
            <div class="rodape-contato">
                <h5>Contato</h5>
                <p>(xx) xxxxx-xxxx</p>
                <p>contato@projetoverao.com</p>
            </div>
            <div class="rodape-redes">
                <h5>Redes Sociais</h5>
                <a href="#"><img src="../assets/icone-instagram.png" alt="Instagram"></a>
                <a href="#"><img src="../assets/icone-facebook.png" alt="Facebook"></a>
                <a href="#"><img src="../assets/icone-whatsapp.png" alt="WhatsApp"></a>
            </div>
        </div>
        <div class="rodape-copy">
            &copy; 2025 CliniVida. Todos os direitos reservados.
        </div>
    </footer>

    <script>
        // Função para mostrar/esconder as etapas do agendamento
        function showNextStep(nextStepId) {
            const steps = document.querySelectorAll('.agenda-step');
            steps.forEach(step => {
                step.style.display = 'none';
            });
            document.getElementById(nextStepId).style.display = 'block';
        }

        // Script para preencher o calendário (exemplo básico)
        document.addEventListener('DOMContentLoaded', function() {
            const calendarBody = document.getElementById('calendar-body');
            const currentMonthYearSpan = document.getElementById('currentMonthYear');
            const prevMonthBtn = document.getElementById('prevMonth');
            const nextMonthBtn = document.getElementById('nextMonth');

            let currentYear = 2025; // Ano fixo conforme seu exemplo
            let currentMonth = 0; // Janeiro (0-indexed)

            function renderCalendar(year, month) {
                calendarBody.innerHTML = '';
                const date = new Date(year, month, 1);
                const firstDay = date.getDay(); // Dia da semana do primeiro dia (0=Dom, 6=Sab)
                const daysInMonth = new Date(year, month + 1, 0).getDate();

                currentMonthYearSpan.textContent = new Date(year, month).toLocaleString('pt-BR', { month: 'long', year: 'numeric' });

                let dayCounter = 1;
                for (let i = 0; i < 6; i++) { // 6 semanas para garantir que o mês caiba
                    const row = document.createElement('tr');
                    for (let j = 0; j < 7; j++) { // 7 dias da semana
                        const cell = document.createElement('td');
                        if (i === 0 && j < firstDay) {
                            // Células vazias antes do primeiro dia do mês
                            cell.textContent = '';
                        } else if (dayCounter <= daysInMonth) {
                            cell.textContent = dayCounter;
                            const fullDate = new Date(year, month, dayCounter);
                            const today = new Date();
                            today.setHours(0,0,0,0); // Zera hora para comparação de data

                            if (fullDate < today) {
                                cell.classList.add('past-day');
                            } else if (dayCounter === 4 && month === 0 && year === 2025) { // Exemplo de dia selecionado
                                cell.classList.add('available-day', 'selected-day');
                            } else if (dayCounter === 5 && month === 0 && year === 2025 || // Exemplo de dia indisponível (Domingo 5)
                                       dayCounter === 12 && month === 0 && year === 2025 ||
                                       dayCounter === 19 && month === 0 && year === 2025 ||
                                       dayCounter === 26 && month === 0 && year === 2025) {
                                cell.classList.add('unavailable-day');
                            } else if (dayCounter === 11 && month === 0 && year === 2025 ||
                                       dayCounter === 18 && month === 0 && year === 2025 ||
                                       dayCounter === 25 && month === 0 && year === 2025) {
                                cell.classList.add('unavailable-day'); // Sábados do exemplo
                            }
                             else {
                                cell.classList.add('available-day');
                            }

                            cell.addEventListener('click', function() {
                                if (cell.classList.contains('available-day')) {
                                    document.querySelectorAll('.selected-day').forEach(d => d.classList.remove('selected-day'));
                                    cell.classList.add('selected-day');
                                    // Atualizar a data selecionada no passo de horários
                                    document.querySelector('.data-selecionada').textContent =
                                        fullDate.toLocaleString('pt-BR', { weekday: 'long', day: 'numeric', month: 'long' });
                                }
                            });
                            dayCounter++;
                        }
                        row.appendChild(cell);
                    }
                    calendarBody.appendChild(row);
                    if (dayCounter > daysInMonth) break; // Para de gerar linhas se todos os dias forem adicionados
                }
            }

            prevMonthBtn.addEventListener('click', () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderCalendar(currentYear, currentMonth);
            });

            nextMonthBtn.addEventListener('click', () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                renderCalendar(currentYear, currentMonth);
            });

            renderCalendar(currentYear, currentMonth); // Renderiza o calendário inicial

            // Lógica para selecionar horários (exemplo)
            document.querySelectorAll('.horario-btn').forEach(button => {
                button.addEventListener('click', function() {
                    if (!this.classList.contains('unavailable')) {
                        document.querySelectorAll('.horario-btn.active').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                    }
                });
            });
        });


        // Função de sair (copiada do paciente.html)
        const sairBtn = document.getElementById('sair');
        if (sairBtn) {
            sairBtn.addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('paciente_nome');
                localStorage.removeItem('paciente_email');
                localStorage.removeItem('paciente_senha');
                window.location.href = "../index.html"; // Volta para a home page
            });
        }
    </script>
</body>
</html>